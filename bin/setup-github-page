#!/usr/bin/env node

var exec = require('child_process').exec,
    step = require('step'),
    conf = require('../config'),
    readline = require('readline');

var rl;

process.chdir('../_deploy');

rl = readline.createInterface(process.stdin, process.stdout, null);
rl.question("Enter the read/write url for your repository: ", function(repo) {

    var user = repo.match(/:([^\/]+)/)[1];
    var branch = (repo.match(/\/[\w-]+.github.com/) == null) ? 'gh-pages' : 'master';
    var project = (branch == 'gh-pages') ? repo.match(/\/([^\.]+)/)[1] : '';
    
    console.log(user, branch, project);

    exec('git remote -v', function(err, stdout, stderr) {
        if (stdout.match(/origin.+?haroog.git/) == null) {
            step(
                function gitRename() {
                }
            )
        }
    });

    step(
        function gitRmoteV() {
            
        }
    );

    rl.close();
    process.stdin.destroy();
});
