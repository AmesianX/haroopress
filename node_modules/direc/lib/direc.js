var fs = require('fs');

function find(dir, options) {
    var files, stats = [], tmp;
    var options = options || {};
    dir = dir || process.cwd();
    files = fs.readdirSync(dir);

    files.forEach(function(file) {
        tmp = fs.statSync(dir+'/'+file);
        tmp._file = dir +'/'+ file;
        stats.push(tmp);
    });

    return stats;
};

exports.find = find;
exports.sort = function(dir, field, flag) {
    var res = find(dir);

    res.sort(function(a, b) {
        return new Date(a[field]).getTime() - new Date(b[field]).getTime();
    });

    return res;
}
